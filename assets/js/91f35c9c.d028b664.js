"use strict";(self.webpackChunkformal_land=self.webpackChunkformal_land||[]).push([[4332],{3745:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>d,frontMatter:()=>s,metadata:()=>a,toc:()=>l});var o=i(4848),n=i(8453);const s={id:"specification-project",title:"\ud83d\udcaf Full Specification Project"},r=void 0,a={id:"tools/coq-of-solidity/specification-project",title:"\ud83d\udcaf Full Specification Project",description:"Repository: github.com/formal-land/100-specification-smart-contracts",source:"@site/docs/tools/coq-of-solidity/01-specification-project.md",sourceDirName:"tools/coq-of-solidity",slug:"/tools/coq-of-solidity/specification-project",permalink:"/docs/tools/coq-of-solidity/specification-project",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{id:"specification-project",title:"\ud83d\udcaf Full Specification Project"},sidebar:"sidebar",previous:{title:"\ud83e\ude81 coq-of-solidity",permalink:"/docs/tools/coq-of-solidity/introduction"},next:{title:"\ud83c\udf31 Garden",permalink:"/docs/tools/garden/introduction"}},c={},l=[{value:"Ingredients",id:"ingredients",level:2}];function h(e){const t={a:"a",admonition:"admonition",h2:"h2",li:"li",p:"p",ul:"ul",...(0,n.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.admonition,{title:"GitHub",type:"note",children:(0,o.jsxs)(t.p,{children:["Repository: ",(0,o.jsx)(t.a,{href:"https://github.com/formal-land/100-specification-smart-contracts",children:"github.com/formal-land/100-specification-smart-contracts"})]})}),"\n",(0,o.jsx)(t.p,{children:"This is a research project to improve the state-of-the-art of the specification of smart contracts."}),"\n",(0,o.jsx)(t.p,{children:'The goal is to make sure a smart contract specification is complete and to fully express that "a user cannot steal or block a smart contract".'}),"\n",(0,o.jsx)(t.p,{children:"As the specification is the single point of failure in formal verification (if we assume the tooling correct), we would obtain a way to guarantee that a smart contract cannot be attacked. This means:"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:"For auditors: a way to find all vulnerabilities in a smart contract and win contests, at the expense of getting into the complexity of formal methods."}),"\n",(0,o.jsx)(t.li,{children:"For smart contract companies: a way to make sure their assets are safe and to get a competitive advantage."}),"\n"]}),"\n",(0,o.jsx)(t.p,{children:'Having code that can be considered as "the law" is also one of the initial dreams of the web3 movement.'}),"\n",(0,o.jsx)(t.h2,{id:"ingredients",children:"Ingredients"}),"\n",(0,o.jsx)(t.p,{children:"Here is what we have as an input:"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:["A list of standard smart contracts (ERC20, ERC721, etc.) with for example the OpenZeppelin implementations: ",(0,o.jsx)(t.a,{href:"https://github.com/OpenZeppelin/openzeppelin-contracts",children:"github.com/OpenZeppelin/openzeppelin-contracts"}),". These correspond to the most common use cases, such as creating and exchanging tokens with various rules (stable coins, NFTs, etc.)."]}),"\n",(0,o.jsxs)(t.li,{children:["A list of large and mainstream smart contracts, such as Uniswap or Compound: ",(0,o.jsx)(t.a,{href:"https://github.com/shafu0x/awesome-smart-contracts",children:"github.com/shafu0x/awesome-smart-contracts"})]}),"\n",(0,o.jsxs)(t.li,{children:["Lists of known vulnerabilities:","\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:["A GitHub repository grouping the vulnerabilities in main categories: ",(0,o.jsx)(t.a,{href:"https://github.com/kadenzipfel/smart-contract-vulnerabilities",children:"github.com/kadenzipfel/smart-contract-vulnerabilities"})]}),"\n",(0,o.jsxs)(t.li,{children:["The list of audit reports from Code4rena: ",(0,o.jsx)(t.a,{href:"https://code4rena.com/reports",children:"code4rena.com/reports"})]}),"\n",(0,o.jsxs)(t.li,{children:["The ",(0,o.jsx)(t.a,{href:"https://rekt.news/",children:"\ud83d\udc38\xa0rekt blog"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(t.p,{children:"On the side of formal verification, we can leverage these techniques:"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:["The use of the interactive theorem prover ",(0,o.jsx)(t.a,{href:"https://rocq-prover.org/",children:"Rocq"}),". It is more powerful than most alternatives in this space, which tend to focus more on full automation and hence limit the kind of properties that can be stated and verified. To extract the semantics of a Solidity smart contract we use our tool ",(0,o.jsx)(t.a,{href:"https://github.com/formal-land/coq-of-solidity",children:"coq-of-solidity"}),"."]}),"\n",(0,o.jsx)(t.li,{children:"The definition of a Domain Specific Language (DSL) to represent the contracts in a more high-level manner, while still being proven as equivalent to the original Solidity code."}),"\n",(0,o.jsxs)(t.li,{children:["In this DSL the use of high-level primitives to express the most common patterns, in a way that is less efficient to execute but easier to reason about. This includes:","\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:"A notion of user."}),"\n",(0,o.jsx)(t.li,{children:"A notion of token."}),"\n",(0,o.jsx)(t.li,{children:"A notion of transfer."}),"\n",(0,o.jsx)(t.li,{children:"A notion of promise (giving the right to someone to spend a certain amount of tokens). This could be represented as a virtual smart contract defining what can be done with the tokens for which we receive some execution rights."}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(t.li,{children:"Expressing (and verifying) higher-order properties to state that it is impossible to get tokens without the explicit user consent, or to block the contract. That can leverage the use of temporal logic and flexibility of the Rocq prover."}),"\n"]})]})}function d(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}},8453:(e,t,i)=>{i.d(t,{R:()=>r,x:()=>a});var o=i(6540);const n={},s=o.createContext(n);function r(e){const t=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:r(e.components),o.createElement(s.Provider,{value:t},e.children)}}}]);